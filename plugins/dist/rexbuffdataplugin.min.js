!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.rexbuffdataplugin=e():t.rexbuffdataplugin=e()}(window,function(){return function(t){var e={};function s(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,s),r.l=!0,r.exports}return s.m=t,s.c=e,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=204)}({204:function(t,e,s){"use strict";s.r(e);const n=0,r=1;var i=class{constructor(){this.buffs={}}setEnable(t,e){return void 0===e&&(e=!0),this.buffs.hasOwnProperty(t)||(this.buffs[t]={enable:!0,value:0,type:n}),this.buffs[t].enable=e,this}set(t,e){this.setEnable(t);var s=typeof e;"number"===s?s=n:"string"===s&&(-1!==e.indexOf("%")?(s=r,e=parseFloat(e)/100):(s=n,e=parseFloat(e)));var i=this.buffs[t];return i.value=e,i.type=s,this}remove(t){return this.buffs.hasOwnProperty(t)&&delete this.buffs[t],this}buff(t){var e,s,i=t,u=this.buffs;for(var f in u)if((e=u[f]).enable)switch(s=e.type,e=e.value,s){case n:i+=e;break;case r:i+=t*e}return i}};const u=Phaser.Utils.Objects.IsPlainObject,f=Phaser.Utils.Objects.GetValue;var o=class{constructor(t,e){if(u(t)){var s=t;t=f(s,"min",void 0),e=f(s,"max",void 0)}this.setMin(t),this.setMax(e)}setMin(t){return this.min=t,this}setMax(t){return this.max=t,this}clamp(t){return void 0!==this.min&&t<this.min?t=this.min:void 0!==this.max&&t>this.max&&(t=this.max),t}},a={setBaseValue:function(t,e){return this.baseValues[t]=e,this.set(t,this.getBuffResult(t)),this},removeBaseValue:function(t){return this.baseValues.hasOwnProperty(t)&&(delete this.baseValues[t],this.remove(t)),this},setBuff:function(t,e,s){return this.buffs.hasOwnProperty(t)||(this.buffs[t]=new i),this.buffs[t].set(e,s),this.set(t,this.getBuffResult(t)),this},enableBuff:function(t,e,s){return this.buffs.hasOwnProperty(t)||(this.buffs[t]=new i),this.buffs[t].setEnable(e,s),this.set(t,this.getBuffResult(t)),this},removeBuff:function(t,e){return this.buffs.hasOwnProperty(t)&&(void 0===e?delete this.buffs[t]:this.buffs[t].remove(e)),this.set(t,this.getBuffResult(t)),this},setMin:function(t,e){return this.bounds.hasOwnProperty(t)||(this.bounds[t]=new o),this.bounds[t].setMin(e),this.set(t,this.getBuffResult(t)),this},setMax:function(t,e){return this.bounds.hasOwnProperty(t)||(this.bounds[t]=new o),this.bounds[t].setMax(e),this.set(t,this.getBuffResult(t)),this},setBounds:function(t,e,s){return this.bounds.hasOwnProperty(t)||(this.bounds[t]=new o),this.bounds[t].setMin(e).setMax(s),this.set(t,this.getBuffResult(t)),this},getBuffResult:function(t){return this.clamp(t,this.buff(t))},buff:function(t,e){return void 0===e&&(e=this.getBaseValue(t)),this.buffs.hasOwnProperty(t)?this.buffs[t].buff(e):e},clamp:function(t,e){return void 0===e&&(e=this.list[t]),this.bounds.hasOwnProperty(t)?this.bounds[t].clamp(e):e},getBaseValue:function(t){return this.baseValues.hasOwnProperty(t)||(this.baseValues[t]=0),this.baseValues[t]},getBuffs:function(t,e){var s=this.buffs[t];return void 0===e?s:s&&s.hasOwnProperty(e)?s[e]:void 0},getBounds:function(t){return this.bounds.hasOwnProperty(t)||(this.bounds[t]=new o),this.bounds[t]}},h=function(t){return void 0===t.buffs&&(t.baseValues={},t.buffs={},t.bounds={}),void 0===t.addBuff&&Object.assign(t,a),t};const b=Phaser.Data.DataManager,l=Phaser.Events.EventEmitter;class c extends b{constructor(t,e){void 0===e&&(e=new l),super(t,e),h(this)}}Object.assign(c.prototype,a);var d=c;e.default=class extends Phaser.Plugins.BasePlugin{constructor(t){super(t)}start(){this.game.events.once("destroy",this.destroy,this)}add(t,e){return new d(t,e)}extend(t){return h(t)}}}}).default});