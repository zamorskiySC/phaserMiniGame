!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.rexrestorabledataplugin=t():e.rexrestorabledataplugin=t()}(window,function(){return function(e){var t={};function s(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,s),r.l=!0,r.exports}return s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(i,r,function(t){return e[t]}.bind(null,r));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=239)}({144:function(e,t,s){"use strict";var i=s(4);const r=Phaser.Data.DataManager,n=Phaser.Utils.Objects.GetValue,o=Phaser.Events.EventEmitter;var a=class extends r{constructor(e,t,s){void 0===t&&(t=new o),super(e,t),this._recordEnable=!0,this.resetFromJSON(s),this.events.on("changedata",this.onValueChange,this).on("setdata",function(e,t,s){this.onValueChange(e,t,s,null)},this).on("removedata",function(e,t,s){this.onValueChange(e,t,null,s)},this)}resetFromJSON(e){this._version=n(e,"version",0),this._versionAlias=n(e,"versionAlias",""),this._repository=n(e,"repository",[]),this._versionAliases=n(e,"versionAliases",{});var t=n(e,"changeList",{}),s=n(e,"data",void 0);if(s)this._recordEnable=!1,this.set(s),this._recordEnable=!0;else{var i=""!==this._versionAlias?this._versionAlias:this._version;for(var r in this._version=0,this.restore(i),this._recordEnable=!1,t)this.setValue(r,t[r][0]);this._recordEnable=!0}this._changeList=t}toJSON(e){void 0===e&&(e=!1);var t={version:this._version,versionAlias:this._versionAlias,changeList:this._changeList,repository:this._repository,versionAliases:this._versionAliases};return e&&(t.data=this.list),t}get version(){return this._version}set version(e){var t;if("string"==typeof e&&(t=e,e=this._versionAliases[e]),"number"==typeof e){if(this._versionAlias=t||"",0===e)return this._recordEnable=!1,super.reset(),this._version=0,Object(i.a)(this._changeList),void(this._recordEnable=!0);e=Math.min(e,this._repository.length);var s,r={};for(var n in this._changeList)r[n]=this._changeList[n][1],delete this._changeList[n];if(this._version===e);else if(this._version<e)for(var o=this._version;o<e;o++)for(var n in s=this._repository[o])r[n]=s[n][0];else for(o=this._version-1;o>=e;o--)for(var n in s=this._repository[o])r[n]=s[n][1];for(var n in this._version=e,this._recordEnable=!1,r)null===(e=r[n])?this.removeValue(n):this.setValue(n,e);this._recordEnable=!0}else this._versionAlias=""}get versionAlias(){return this._versionAlias}get lastVersion(){return this._repository.length}get versionAliases(){var e=[];for(var t in this._versionAliases)e.push(t);return e}commit(e){for(var t in this._repository.length=this._version,this._versionAliases)this._versionAliases[t]>this._version&&delete this._versionAliases[t];return this._repository.push(this._changeList),this._changeList={},this._version++,"string"==typeof e&&(this._versionAlias=e,this._versionAliases[e]=this._version),this}restore(e,t){return void 0===e&&(e=""!==this._versionAlias?this._versionAlias:this._version),void 0===t&&(t=!1),t&&(this.version=0),this.version=e,this}reset(){return this.restore(0),this._repository.length=0,Object(i.a)(this._versionAliases),this}onValueChange(e,t,s,i){this._recordEnable&&(this._changeList.hasOwnProperty(t)?this._changeList[t][0]=s:this._changeList[t]=[s,i])}};t.a=a},239:function(e,t,s){"use strict";s.r(t);var i=s(144);t.default=class extends Phaser.Plugins.BasePlugin{constructor(e){super(e)}start(){this.game.events.once("destroy",this.destroy,this)}add(e,t,s){return new i.a(e,t,s)}}},4:function(e,t,s){"use strict";t.a=function(e){if(Array.isArray(e))e.length=0;else for(var t in e)delete e[t]}}}).default});